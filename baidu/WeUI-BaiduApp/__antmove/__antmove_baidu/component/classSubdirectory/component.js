"use strict";function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(r,!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function makeLifes(t,r){[{original:"onInit",target:"created"},{original:"deriveDataFromProps",target:"attached"},{original:"didUnmount",target:"detached"},{original:"didMount",target:"ready"}].map(function(e){var i=r[e.original],n=r[e.target];t[e.target]=function(){var t=this;if("created"===e.target){this.props=this.props||{};var r={};if(Object.keys(this.props).map(function(e){void 0!==t.properties[e]&&null!==t.properties[e]||(r[e]=t.props[e])}),this.setData(r),this.props=this.properties,this.$page={},this.$id=this.id,this.is="",this.props.oldEvent){var o=this;JSON.parse(this.props.oldEvent).map(function(n){o.props[n]=function(){for(var e=n.substr(2,n.length).toLowerCase(),t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];r[0]&&r[0].detail?o.triggerEvent(e,r[0].detail):o.triggerEvent(e,r)}})}}i&&i.call(this),n&&n.call(this)},delete r[e.original],delete r[e.target]})}function makeMixin(e,t){if(t.mixins){e.behaviors=function t(e){return(0<arguments.length&&void 0!==e?e:[]).map(function(e){return e.mixins&&(e.behaviors=t(e.mixins),delete e.mixins),e.created=e.onInit,e.deriveDataFromProps&&console.warn("生命周期 deriveDataFromProps 不支持更新前触发情景"),e.attached=e.deriveDataFromProps,e.ready=e.didMount,e.detached=e.didUnmount,delete e.onInit,delete e.deriveDataFromProps,delete e.didMount,delete e.didUnmount,e.didUpdate&&console.warn("生命周期 didUpdate 不支持"),Behavior(e)})}(t.mixins),delete e.mixins}}function makeEventObj(e,t){if(t.methods){var n=t.methods,r={};Object.keys(n).forEach(function(i){r[i]=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t[0]&&t[0].target?(t[0].target.dataset=_objectSpread({},t[0].currentTarget.dataset)||{},n[i].call(this,t[0])):n[i].apply(this,t)}}),e.methods=r}}module.exports={processTransformationComponent:function(e,t){t.didUpdate&&console.warn("生命周期 didUpdate 不支持"),t.deriveDataFromProps&&console.warn("生命周期 deriveDataFromProps 不支持更新前触发情景"),makeLifes(e,t),makeEventObj(e=Object.assign(e,t),t),makeMixin(e,t)}};